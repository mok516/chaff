---
title: "main."
author: "Molly K"
date: "04/11/2020"
output: "html_document"
bibliography: "reference.bib"
---
<!-- Setup, FALSE for these 3 so code doesn't show up in document -->
```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE,
                      warning = FALSE,
                      message = FALSE,
                      fig.retina = 3)
```

<!-- package loading -->
```{r packages}
library(tidyverse)

```

# Introduction 
Working with the **chaff** data set, this data records the masses of male and female chaffinches.  

## Methods
Use R analysis within rmarkdown [@markdown] to calculate the **sum of squares** from the **mass** values. 

```{r data}
# read in chaff data
chaff <- read.table("raw_data/chaff.txt", header = TRUE)
str(chaff)

# tidy chaff data
chaff2 <- pivot_longer(data = chaff, cols = everything(),
                       names_to = "sex", values_to = "mass")
str(chaff2)
file <-  "../chaff/chaff2.txt"
# save to file 
write.table(chaff2, 
            file, 
            quote = FALSE,
            row.names = FALSE)
```
<!-- code chunk for SS(x) -->
```{r analysis}
sum_sq <- function(df, measure) {
  df %>% summarise(ss = sum(({{measure}} - mean({{measure}}))^2))
}

sum_sq(chaff2, mass)

# adapt to calculate SS(x) for each group
sum_sq <- function(df, measure, group) {
  df %>% group_by({{ group }}) %>% 
    summarise(ss = sum(({{measure}} - mean({{measure}}))^2))
}

sum_sq(chaff2, mass, sex)
```
<!-- summarise by sex - include the mean, standard deviation, sample size and standard error -->
```{r summarise}
chaff_summary <- chaff2 %>%
  group_by(sex) %>%
  summarise(mean_index = mean(mass),
            n = length (mass),
            sd = sd(mass),
            se = sd/sqrt(n))
chaff_summary
```
<!-- make into a function -->
```{r function}
chaff_summary <- function(summarise) {{chaff2 %>%
  group_by(sex) %>%
  summarise(mean_index = mean(mass),
            n = length (mass),
            sd = sd(mass),
            se = sd/sqrt(n))}
  }
```



### Results 
The difference in masses between sex. The *SS(x)* values for **females** is **86.8320**, whilst for **males** it is **87.8975**.
Summary of data shows a **mean** of **20.48** for **females** and **22.28** for **males**. With **males** having a *Standard deviation* of **2.15**  and a *Standard error* of **0.481**. 
For females the results were, a *Standard deviation* of **2.14** and a *Standard error* of **0.478**.

#### Discussion 
**Male** chaffinches appear to be *heavier* than **Females** from this data, having a *higher* mean **mass** (by ~**1.06 grams**). Despite having *slightly higher* standard deviations and standard errors the results are conclusive.
